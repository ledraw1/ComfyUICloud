{"last_node_id":162,"last_link_id":288,"nodes":[{"id":16,"type":"VAEEncode","pos":{"0":710,"1":1380},"size":{"0":210,"1":46},"flags":{},"order":14,"mode":0,"inputs":[{"name":"pixels","type":"IMAGE","link":109},{"name":"vae","type":"VAE","link":19}],"outputs":[{"name":"LATENT","type":"LATENT","links":[280],"slot_index":0,"shape":3}],"properties":{"Node name for S&R":"VAEEncode"}},{"id":19,"type":"CLIPTextEncode","pos":{"0":710,"1":1220},"size":{"0":210,"1":96.00000762939453},"flags":{},"order":13,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":159}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[279],"slot_index":0,"shape":3}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["((photo, 3d, cg, ))"],"color":"#322","bgcolor":"#533"},{"id":134,"type":"Reroute","pos":{"0":2180,"1":40},"size":[75,26],"flags":{},"order":23,"mode":0,"inputs":[{"name":"","type":"*","link":238,"widget":{"name":"value"}}],"outputs":[{"name":"","type":"STRING","links":[240],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":136,"type":"Reroute","pos":{"0":2280,"1":60},"size":[75,26],"flags":{},"order":25,"mode":0,"inputs":[{"name":"","type":"*","link":240,"widget":{"name":"value"}}],"outputs":[{"name":"","type":"STRING","links":[241],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":135,"type":"Reroute","pos":{"0":2179,"1":76},"size":[75,26],"flags":{},"order":26,"mode":4,"inputs":[{"name":"","type":"*","link":252}],"outputs":[{"name":"","type":"STRING","links":null}],"properties":{"showOutputText":false,"horizontal":false}},{"id":138,"type":"Note","pos":{"0":1770,"1":570},"size":{"0":338.6843566894531,"1":58},"flags":{},"order":0,"mode":4,"inputs":[],"outputs":[],"properties":{"text":""},"widgets_values":["https://github.com/ZHO-ZHO-ZHO/ComfyUI-Gemini"],"color":"#c09430","bgcolor":"#653"},{"id":93,"type":"Gemini_API_S_Zho","pos":{"0":688.2024536132812,"1":419.51708984375},"size":{"0":400,"1":200},"flags":{},"order":16,"mode":4,"inputs":[{"name":"image","type":"IMAGE","link":181}],"outputs":[{"name":"text","type":"STRING","links":[182],"slot_index":0,"shape":3}],"properties":{"Node name for S&R":"Gemini_API_S_Zho"},"widgets_values":["If there is a person in the picture, what country is it from, describe its orientation, gender, age, race, color, hairstyle, hair color, eye color, clothing in 30 words or less. Do not describe anything else.","gemini-1.5-pro-latest",false]},{"id":143,"type":"Note","pos":{"0":-143,"1":1136},"size":{"0":363.16644287109375,"1":97.66400146484375},"flags":{},"order":1,"mode":0,"inputs":[],"outputs":[],"properties":{"text":""},"widgets_values":["checkpoint: \nhttps://civitai.com/models/112902?modelVersionId=354657\n(ComfyUI/models/checkpoints)\n\nIf you change the checkpoint model, please adjust the cfg and steps in ksample yourself."],"color":"#223","bgcolor":"#335"},{"id":92,"type":"Gemini_API_S_Zho","pos":{"0":688.2024536132812,"1":169.51708984375},"size":{"0":400,"1":200},"flags":{},"order":15,"mode":4,"inputs":[{"name":"image","type":"IMAGE","link":179}],"outputs":[{"name":"text","type":"STRING","links":[180],"slot_index":0,"shape":3}],"properties":{"Node name for S&R":"Gemini_API_S_Zho"},"widgets_values":["Describe the scene in the picture as a anime scene in 40 words or less.","gemini-1.5-pro-latest",false]},{"id":144,"type":"ConcatText_Zho","pos":{"0":1630,"1":380},"size":{"0":210,"1":54},"flags":{},"order":22,"mode":4,"inputs":[{"name":"text_1","type":"STRING","link":253,"widget":{"name":"text_1"}},{"name":"text_2","type":"STRING","link":254,"widget":{"name":"text_2"}}],"outputs":[{"name":"text","type":"STRING","links":[249],"slot_index":0,"shape":3}],"properties":{"Node name for S&R":"ConcatText_Zho"},"widgets_values":["",""]},{"id":146,"type":"ConcatText_Zho","pos":{"0":1870,"1":320},"size":{"0":210,"1":54},"flags":{},"order":24,"mode":4,"inputs":[{"name":"text_1","type":"STRING","link":259,"widget":{"name":"text_1"}},{"name":"text_2","type":"STRING","link":249,"widget":{"name":"text_2"}}],"outputs":[{"name":"text","type":"STRING","links":[252],"slot_index":0,"shape":3}],"properties":{"Node name for S&R":"ConcatText_Zho"},"widgets_values":["",""]},{"id":9,"type":"DisplayText_Zho","pos":{"0":1128.202392578125,"1":159.51708984375},"size":{"0":428.98046875,"1":193.8671875},"flags":{},"order":18,"mode":4,"inputs":[{"name":"text","type":"STRING","link":180,"widget":{"name":"text"}}],"outputs":[{"name":"text","type":"STRING","links":[253],"slot_index":0,"shape":3}],"properties":{"Node name for S&R":"DisplayText_Zho"},"widgets_values":["","A young woman in a kimono is standing in a field of cherry blossoms. She is looking up at the blossoms with a serene expression on her face. The sun is shining brightly, and the birds are singing. It is a peaceful and beautiful day."]},{"id":44,"type":"DisplayText_Zho","pos":{"0":1128.202392578125,"1":399.51708984375},"size":{"0":427.6936950683594,"1":95.50304412841797},"flags":{},"order":19,"mode":4,"inputs":[{"name":"text","type":"STRING","link":182,"widget":{"name":"text"}}],"outputs":[{"name":"text","type":"STRING","links":[254],"slot_index":0,"shape":3}],"properties":{"Node name for S&R":"DisplayText_Zho"},"widgets_values":["","The person in the picture is from Japan. The person is looking to the right of the frame. The person is a young woman. The person is wearing a light-colored kimono with pink and blue floral designs. The person's hair is black and is up in a traditional Japanese hairstyle. The person's eyes are brown."]},{"id":142,"type":"Note","pos":{"0":-145,"1":1310},"size":{"0":360.7425842285156,"1":102.41358184814453},"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[],"properties":{"text":""},"widgets_values":["lora: \nhttps://civitai.com/models/137562/studioghibliredmond-studio-ghibli-lora-for-sd-xl\n(ComfyUI/models/loras)"],"color":"#223","bgcolor":"#335"},{"id":133,"type":"ConcatText_Zho","pos":{"0":1880,"1":-270},"size":{"0":210,"1":54},"flags":{},"order":20,"mode":0,"inputs":[{"name":"text_1","type":"STRING","link":258,"widget":{"name":"text_1"}},{"name":"text_2","type":"STRING","link":262,"widget":{"name":"text_2"}}],"outputs":[{"name":"text","type":"STRING","links":[238],"slot_index":0,"shape":3}],"properties":{"Node name for S&R":"ConcatText_Zho"},"widgets_values":["",""]},{"id":145,"type":"CR Text","pos":{"0":1630,"1":200},"size":{"0":210,"1":116.04109191894531},"flags":{},"order":3,"mode":4,"inputs":[],"outputs":[{"name":"text","type":"*","links":[259],"slot_index":0,"shape":3},{"name":"show_help","type":"STRING","links":[],"slot_index":1,"shape":3}],"properties":{"Node name for S&R":"CR Text"},"widgets_values":["((anime scene, StdGBRedmAF, Studio Ghibli, bright colors, sunny)), "]},{"id":149,"type":"LayerMask: LoadFlorence2Model","pos":{"0":710,"1":-210},"size":{"0":330,"1":60},"flags":{},"order":4,"mode":0,"inputs":[],"outputs":[{"name":"florence2_model","type":"FLORENCE2","links":[260],"slot_index":0,"shape":3}],"properties":{"Node name for S&R":"LayerMask: LoadFlorence2Model"},"widgets_values":["CogFlorence-2.1-Large"],"color":"rgba(27, 80, 119, 0.7)"},{"id":81,"type":"LoraLoader","pos":{"0":243,"1":1292},"size":{"0":315,"1":126},"flags":{},"order":11,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":156},{"name":"clip","type":"CLIP","link":157}],"outputs":[{"name":"MODEL","type":"MODEL","links":[277],"slot_index":0,"shape":3},{"name":"CLIP","type":"CLIP","links":[158,159],"slot_index":1,"shape":3}],"properties":{"Node name for S&R":"LoraLoader"},"widgets_values":["sdxl\\StudioGhibli.Redmond-StdGBRRedmAF-StudioGhibli.safetensors",1,1]},{"id":148,"type":"LayerUtility: Florence2Image2Prompt","pos":{"0":1060,"1":-210},"size":{"0":370,"1":200},"flags":{},"order":17,"mode":0,"inputs":[{"name":"florence2_model","type":"FLORENCE2","link":260},{"name":"image","type":"IMAGE","link":264}],"outputs":[{"name":"text","type":"STRING","links":[262,263],"slot_index":0,"shape":3},{"name":"preview_image","type":"IMAGE","links":null,"shape":3}],"properties":{"Node name for S&R":"LayerUtility: Florence2Image2Prompt"},"widgets_values":["more detailed caption","Ignore the artistic style of the picture.",1024,3,false,false],"color":"rgba(38, 73, 116, 0.7)"},{"id":151,"type":"DisplayText_Zho","pos":{"0":1440,"1":-210},"size":{"0":370,"1":190},"flags":{},"order":21,"mode":0,"inputs":[{"name":"text","type":"STRING","link":263,"widget":{"name":"text"}}],"outputs":[{"name":"text","type":"STRING","links":null,"shape":3}],"properties":{"Node name for S&R":"DisplayText_Zho"},"widgets_values":["","A close-up of the Statue of Liberty, captured in a side profile. The statue stands tall against a backdrop of a partly cloudy sky. The Statue is adorned with a crown of thorns, a torch held aloft in one hand, and a book in the other. The color palette is dominated by shades of green and blue, with the torch's golden hue contrasting against the pale blue of the statue. The figure's pose is regal and majestic, with her right arm raised high, holding the torch aloft, and her left arm draped in a flowing robe. The overall style of the image is realistic, with a focus on the intricate details of the sculpture and the natural beauty of the sky."]},{"id":18,"type":"CLIPTextEncode","pos":{"0":710,"1":1110},"size":{"0":210,"1":54},"flags":{},"order":27,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":158},{"name":"text","type":"STRING","link":241,"widget":{"name":"text"}}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[270],"slot_index":0,"shape":3}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":[""],"color":"#232","bgcolor":"#353"},{"id":129,"type":"CR Text","pos":{"0":1440,"1":-370},"size":{"0":370,"1":100},"flags":{},"order":5,"mode":0,"inputs":[],"outputs":[{"name":"text","type":"*","links":[258],"slot_index":0,"shape":3},{"name":"show_help","type":"STRING","links":[],"slot_index":1,"shape":3}],"properties":{"Node name for S&R":"CR Text"},"widgets_values":["((anime scene, StdGBRedmAF, Studio Ghibli, bright colors, sunny)), "]},{"id":15,"type":"CheckpointLoaderSimple","pos":{"0":250,"1":1140},"size":{"0":315,"1":98},"flags":{},"order":6,"mode":0,"inputs":[],"outputs":[{"name":"MODEL","type":"MODEL","links":[156],"slot_index":0,"shape":3},{"name":"CLIP","type":"CLIP","links":[157],"slot_index":1,"shape":3},{"name":"VAE","type":"VAE","links":[19,281],"slot_index":2,"shape":3}],"properties":{"Node name for S&R":"CheckpointLoaderSimple"},"widgets_values":["sdxl\\dreamshaperXL_lightningDPMSDE.safetensors"]},{"id":86,"type":"SaveImage","pos":{"0":1800,"1":1110},"size":{"0":297.234130859375,"1":459.2497253417969},"flags":{},"order":30,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":282}],"outputs":[],"properties":{"Node name for S&R":"SaveImage"},"widgets_values":["Photo 2 Anime/ComfyUI"]},{"id":160,"type":"HighRes-Fix Script","pos":{"0":1010,"1":1310},"size":[330,250],"flags":{},"order":7,"mode":0,"inputs":[{"name":"script","type":"SCRIPT","link":null}],"outputs":[{"name":"SCRIPT","type":"SCRIPT","links":[276],"shape":3}],"properties":{"Node name for S&R":"HighRes-Fix Script"},"widgets_values":["latent","(use same)","ttl_nn.SDXL","1x-ITF-SkinDiffDetail-Lite-v1.pth",1.5,true,48627463158221,null,4,0.5,1,false,"flux\\InstantX_FLUX.1-dev-Controlnet-Union.safetensors",1,"none",false],"color":"#443322","bgcolor":"#665533","shape":1},{"id":155,"type":"ControlNetApply","pos":{"0":1080,"1":1130},"size":{"0":211.60000610351562,"1":98},"flags":{},"order":28,"mode":0,"inputs":[{"name":"conditioning","type":"CONDITIONING","link":270},{"name":"control_net","type":"CONTROL_NET","link":268,"slot_index":1},{"name":"image","type":"IMAGE","link":287}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[278],"slot_index":0,"shape":3}],"properties":{"Node name for S&R":"ControlNetApply"},"widgets_values":[0.9]},{"id":156,"type":"ControlNetLoader","pos":{"0":610,"1":980},"size":{"0":440,"1":60},"flags":{},"order":8,"mode":0,"inputs":[],"outputs":[{"name":"CONTROL_NET","type":"CONTROL_NET","links":[268],"shape":3}],"properties":{"Node name for S&R":"ControlNetLoader"},"widgets_values":["sdxl\\CN-anytest_v4-marged.safetensors"]},{"id":157,"type":"Note","pos":{"0":610,"1":840},"size":{"0":440,"1":90},"flags":{},"order":9,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["https://huggingface.co/2vXpSwA7/iroiro-lora/blob/main/test_controlnet2/CN-anytest_v4-marged.safetensors\n(ComfyUI\\models\\controlnet)"],"color":"#432","bgcolor":"#653"},{"id":63,"type":"ImageScaleToTotalPixels","pos":{"0":100,"1":470},"size":{"0":315,"1":82},"flags":{},"order":12,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":108}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[109,111,179,181,264,287],"slot_index":0,"shape":3}],"properties":{"Node name for S&R":"ImageScaleToTotalPixels"},"widgets_values":["lanczos",1]},{"id":41,"type":"Image Comparer (rgthree)","pos":{"0":680,"1":-1560},"size":{"0":1268.3077392578125,"1":995.1896362304688},"flags":{},"order":31,"mode":0,"inputs":[{"name":"image_a","type":"IMAGE","link":283,"dir":3},{"name":"image_b","type":"IMAGE","link":111,"dir":3}],"outputs":[],"properties":{"comparer_mode":"Slide"},"widgets_values":[[{"name":"A","selected":true,"url":"/api/view?filename=rgthree.compare._temp_kbdpv_00111_.png&type=temp&subfolder=&rand=0.5494886635209724"},{"name":"B","selected":true,"url":"/api/view?filename=rgthree.compare._temp_kbdpv_00112_.png&type=temp&subfolder=&rand=0.37377513033801213"}]]},{"id":158,"type":"KSampler (Efficient)","pos":{"0":1410,"1":1090},"size":[330,560],"flags":{},"order":29,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":277},{"name":"positive","type":"CONDITIONING","link":278},{"name":"negative","type":"CONDITIONING","link":279},{"name":"latent_image","type":"LATENT","link":280},{"name":"optional_vae","type":"VAE","link":281},{"name":"script","type":"SCRIPT","link":276}],"outputs":[{"name":"MODEL","type":"MODEL","links":null,"shape":3},{"name":"CONDITIONING+","type":"CONDITIONING","links":null,"shape":3},{"name":"CONDITIONING-","type":"CONDITIONING","links":null,"shape":3},{"name":"LATENT","type":"LATENT","links":null,"shape":3},{"name":"VAE","type":"VAE","links":null,"shape":3},{"name":"IMAGE","type":"IMAGE","links":[282,283],"slot_index":5,"shape":3}],"properties":{"Node name for S&R":"KSampler (Efficient)"},"widgets_values":[1094003932112125,null,4,3,"dpmpp_sde","karras",1,"auto","true"],"color":"#332222","bgcolor":"#553333","shape":1},{"id":1,"type":"LoadImage","pos":{"0":-170,"1":-1410},"size":[740,780],"flags":{},"order":10,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[108],"slot_index":0,"shape":3},{"name":"MASK","type":"MASK","links":null,"shape":3}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["1.jpg","image"]}],"links":[[19,15,2,16,1,"VAE"],[108,1,0,63,0,"IMAGE"],[109,63,0,16,0,"IMAGE"],[111,63,0,41,1,"IMAGE"],[156,15,0,81,0,"MODEL"],[157,15,1,81,1,"CLIP"],[158,81,1,18,0,"CLIP"],[159,81,1,19,0,"CLIP"],[179,63,0,92,0,"IMAGE"],[180,92,0,9,0,"STRING"],[181,63,0,93,0,"IMAGE"],[182,93,0,44,0,"STRING"],[238,133,0,134,0,"*"],[240,134,0,136,0,"*"],[241,136,0,18,1,"STRING"],[249,144,0,146,1,"STRING"],[252,146,0,135,0,"*"],[253,9,0,144,0,"STRING"],[254,44,0,144,1,"STRING"],[258,129,0,133,0,"STRING"],[259,145,0,146,0,"STRING"],[260,149,0,148,0,"FLORENCE2"],[262,148,0,133,1,"STRING"],[263,148,0,151,0,"STRING"],[264,63,0,148,1,"IMAGE"],[268,156,0,155,1,"CONTROL_NET"],[270,18,0,155,0,"CONDITIONING"],[276,160,0,158,5,"SCRIPT"],[277,81,0,158,0,"MODEL"],[278,155,0,158,1,"CONDITIONING"],[279,19,0,158,2,"CONDITIONING"],[280,16,0,158,3,"LATENT"],[281,15,2,158,4,"VAE"],[282,158,5,86,0,"IMAGE"],[283,158,5,41,0,"IMAGE"],[287,63,0,155,2,"IMAGE"]],"groups":[{"title":"Gemini","bounding":[656,68,1473,572],"color":"#3f789e","font_size":24,"flags":{}},{"title":"VLM","bounding":[660,-510,1470,550],"color":"#3f789e","font_size":24,"flags":{}}],"config":{},"extra":{"ds":{"scale":0.9090909090909091,"offset":[1009.2912319994812,1625.3394370885967]}},"version":0.4,"widget_idx_map":{"158":{"seed":0,"sampler_name":4,"scheduler":5},"160":{"seed":6}},"seed_widgets":{"158":0,"160":6}}